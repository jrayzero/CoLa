from ..cola.frontend.arg_parse import *
import basic_io
import sys
import transforms
import quantize
import trav
import golomb

parser = ArgParse()
parser.register('prefix_path', ArgOpt().set_any_str(), '', 'Path to prepend on to any relative paths used for data access.')
parser.register('basic_io', ArgOpt().set_any_bool(), False, 'If true, test basic_io.seq')
parser.register('quantize', ArgOpt().set_any_bool(), False, 'If true, test quantize.seq')
parser.register('transforms', ArgOpt().set_any_bool(), False, 'If true, test transforms.seq')
parser.register('trav', ArgOpt().set_any_bool(), False, 'If true, test trav.seq')
parser.register('golomb', ArgOpt().set_any_bool(), False, 'If true, test golomb.seq')
parser.register('all', ArgOpt().set_any_bool(), True, 'If true, run all tests')
parser.parse(sys.argv[1:])

prefix_path = parser['prefix_path'].to_str()
if prefix_path != '':
  prefix_path += '/'

do_all = parser['all']
  
if do_all or parser['basic_io']:
  basic_io.do_test(prefix_path)
if do_all or parser['quantize']:
  quantize.do_test()
if do_all or parser['transforms']:
  transforms.do_test()
if do_all or parser['trav']:
  trav.do_test()
if do_all or parser['golomb']:
  golomb.do_test()
